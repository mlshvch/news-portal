<%= render 'error' %>

<% if policy(@news_articles).index? %>
  <table>
    <thead>
    <tr>
      <th>Title</th>
      <th>Body</th>
      <th>Author</th>
      <th>Created at</th>
      <th colspan="3"></th>
    </tr>
    </thead>
    <tbody>
    <% @news_articles.includes([:rich_text_body]).each do |news_article| %>
      <tr>
        <td><%= news_article.title %></td>
        <% unless (news_article.access_rights = :only_title) %>
          <td><%= news_article.description %></td>
        <% end %>
        <td><%= news_article.body %></td>
        <td><%= news_article.user_id %></td>
        <td><%= news_article.created_at %></td>

        <td><%= link_to 'Show', news_article %></td>
        <% if policy(news_article).update? %>
          <td><%= link_to 'Edit', edit_news_article_path(news_article) %></td>
        <% end %>
        <% if policy(news_article).destroy? %>

          <td><%= link_to 'Destroy', news_article, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        <% end %>
      </tr>
    <% end %>
    </tbody>
  </table>
<% end %>
